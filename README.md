# ğŸŒ æ—…æ¸¸æ—¥è®° Travel Diary

> æºç¨‹å‰ç«¯è®­ç»ƒè¥é¡¹ç›® - ä¸€ä¸ªå®Œæ•´çš„æ—…æ¸¸æ—¥è®°åˆ†äº«å¹³å°

## ğŸ“– é¡¹ç›®ç®€ä»‹

æ—…æ¸¸æ—¥è®°æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„æ—…æ¸¸å†…å®¹åˆ†äº«å¹³å°ï¼ŒåŒ…å«ç§»åŠ¨ç«¯H5åº”ç”¨ã€PCç«¯å®¡æ ¸ç®¡ç†ç³»ç»Ÿå’ŒNode.jsåç«¯æœåŠ¡ã€‚ç”¨æˆ·å¯ä»¥å‘å¸ƒæ—…æ¸¸æ—¥è®°ã€ä¸Šä¼ å›¾ç‰‡å’Œè§†é¢‘ã€è¿›è¡Œç‚¹èµè¯„è®ºäº’åŠ¨ï¼Œç®¡ç†å‘˜å¯ä»¥é€šè¿‡PCç«¯å®¡æ ¸ç”¨æˆ·å‘å¸ƒçš„å†…å®¹ã€‚

### âœ¨ ä¸»è¦åŠŸèƒ½

- ğŸ“± **ç§»åŠ¨ç«¯ (H5)**
  - ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€ä¸ªäººä¿¡æ¯ç®¡ç†
  - å‘å¸ƒæ—…æ¸¸æ—¥è®°ï¼ˆæ”¯æŒå›¾ç‰‡ã€è§†é¢‘ä¸Šä¼ ï¼‰
  - æµè§ˆæ—¥è®°åˆ—è¡¨ã€æœç´¢åŠŸèƒ½
  - æ—¥è®°è¯¦æƒ…æŸ¥çœ‹ã€ç‚¹èµã€è¯„è®º
  - æˆ‘çš„æ—¥è®°ç®¡ç†

- ğŸ’» **PCå®¡æ ¸ç«¯**
  - ç®¡ç†å‘˜ç™»å½•
  - æ—¥è®°å®¡æ ¸ï¼ˆé€šè¿‡/é©³å›ï¼‰
  - å†…å®¹ç®¡ç†

- ğŸ”§ **åç«¯æœåŠ¡**
  - RESTful APIæ¥å£
  - ç”¨æˆ·è®¤è¯ä¸æˆæƒï¼ˆJWTï¼‰
  - æ–‡ä»¶ä¸Šä¼ å¤„ç†
  - æ•°æ®åº“äº¤äº’ï¼ˆSequelize ORMï¼‰

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
TravelDiary/
â”œâ”€â”€ traveldiary/              # H5ç§»åŠ¨ç«¯
â”‚   â”œâ”€â”€ public/               # é™æ€èµ„æº
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/              # APIæ¥å£
â”‚   â”‚   â”œâ”€â”€ assets/           # èµ„æºæ–‡ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ css/          # æ ·å¼æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ components/       # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ footer/       # åº•éƒ¨å¯¼èˆª
â”‚   â”‚   â”‚   â”œâ”€â”€ notecard/     # æ—¥è®°å¡ç‰‡
â”‚   â”‚   â”‚   â””â”€â”€ searchbar/    # æœç´¢æ 
â”‚   â”‚   â”œâ”€â”€ pages/            # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ home/         # é¦–é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ login/        # ç™»å½•
â”‚   â”‚   â”‚   â”œâ”€â”€ register/     # æ³¨å†Œ
â”‚   â”‚   â”‚   â”œâ”€â”€ publish/      # å‘å¸ƒæ—¥è®°
â”‚   â”‚   â”‚   â”œâ”€â”€ details/      # æ—¥è®°è¯¦æƒ…
â”‚   â”‚   â”‚   â”œâ”€â”€ mynotes/      # æˆ‘çš„æ—¥è®°
â”‚   â”‚   â”‚   â””â”€â”€ search/       # æœç´¢
â”‚   â”‚   â”œâ”€â”€ router/           # è·¯ç”±é…ç½®
â”‚   â”‚   â”œâ”€â”€ App.js            # åº”ç”¨å…¥å£
â”‚   â”‚   â””â”€â”€ config.js         # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ traveldiary-audit/        # PCå®¡æ ¸ç«¯
â”‚   â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”‚   â”œâ”€â”€ Home.jsx      # å®¡æ ¸é¦–é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ Details.jsx   # æ—¥è®°è¯¦æƒ…
â”‚   â”‚   â”‚   â””â”€â”€ Login.jsx     # ç®¡ç†å‘˜ç™»å½•
â”‚   â”‚   â”œâ”€â”€ App.js
â”‚   â”‚   â”œâ”€â”€ config.js
â”‚   â”‚   â””â”€â”€ index.js
â”‚   â”œâ”€â”€ .env                  # ç¯å¢ƒå˜é‡
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ traveldiary-backend/      # Node.jsåç«¯
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ db.js             # æ•°æ®åº“é…ç½®
â”‚   â”œâ”€â”€ models/               # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ users.js          # ç”¨æˆ·æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ diaries.js        # æ—¥è®°æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ diary_images.js   # æ—¥è®°å›¾ç‰‡
â”‚   â”‚   â”œâ”€â”€ diary_videos.js   # æ—¥è®°è§†é¢‘
â”‚   â”‚   â”œâ”€â”€ diary_likes.js    # ç‚¹èµè®°å½•
â”‚   â”‚   â”œâ”€â”€ diary_comments.js # è¯„è®ºè®°å½•
â”‚   â”‚   â””â”€â”€ index.js
â”‚   â”œâ”€â”€ routes/               # è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ users.js          # ç”¨æˆ·ç›¸å…³
â”‚   â”‚   â”œâ”€â”€ diaries.js        # æ—¥è®°ç›¸å…³
â”‚   â”‚   â”œâ”€â”€ diary_likes.js    # ç‚¹èµç›¸å…³
â”‚   â”‚   â””â”€â”€ diary_comments.js # è¯„è®ºç›¸å…³
â”‚   â”œâ”€â”€ public/               # ä¸Šä¼ æ–‡ä»¶å­˜å‚¨
â”‚   â”‚   â”œâ”€â”€ avatars/          # å¤´åƒ
â”‚   â”‚   â”œâ”€â”€ diary_images/     # æ—¥è®°å›¾ç‰‡
â”‚   â”‚   â””â”€â”€ diary_videos/     # æ—¥è®°è§†é¢‘
â”‚   â”œâ”€â”€ app.js                # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ traveldiary.sql       # æ•°æ®åº“ç»“æ„
â”‚   â”œâ”€â”€ .env                  # ç¯å¢ƒå˜é‡
â”‚   â””â”€â”€ package.json
â”‚
â””â”€â”€ README.md                 # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯æŠ€æœ¯

#### H5ç§»åŠ¨ç«¯
- **æ¡†æ¶**: React 18.3.1
- **è·¯ç”±**: React Router DOM 7.5.3
- **UIç»„ä»¶åº“**: 
  - Ant Design Mobile 5.39.0
  - React Vant Icons
- **HTTPå®¢æˆ·ç«¯**: Axios 1.9.0
- **å›¾ç‰‡/è§†é¢‘**: 
  - React Photo View 1.2.7ï¼ˆå›¾ç‰‡é¢„è§ˆï¼‰
  - React Player 2.16.0ï¼ˆè§†é¢‘æ’­æ”¾ï¼‰
  - React Image Zoomï¼ˆå›¾ç‰‡ç¼©æ”¾ï¼‰
- **è½®æ’­**: Swiper 11.2.6
- **æ„å»ºå·¥å…·**: React Scripts 5.0.1

#### PCå®¡æ ¸ç«¯
- **æ¡†æ¶**: React 19.1.0
- **è·¯ç”±**: React Router DOM 7.6.0
- **UIç»„ä»¶åº“**: Ant Design 5.25.1
- **HTTPå®¢æˆ·ç«¯**: Axios 1.9.0
- **æ„å»ºå·¥å…·**: React Scripts 5.0.1

### åç«¯æŠ€æœ¯
- **è¿è¡Œæ—¶**: Node.js
- **æ¡†æ¶**: Express 5.1.0
- **æ•°æ®åº“**: MySQL 8.0+
- **ORM**: Sequelize 6.37.7
- **æ•°æ®åº“é©±åŠ¨**: MySQL2 3.15.1
- **èº«ä»½è®¤è¯**: 
  - JSON Web Token (jsonwebtoken 9.0.2)
  - bcryptjs 3.0.2ï¼ˆå¯†ç åŠ å¯†ï¼‰
- **æ–‡ä»¶ä¸Šä¼ **: Multer 1.4.5
- **è·¨åŸŸ**: CORS 2.8.5
- **ç¯å¢ƒå˜é‡**: dotenv 16.6.1
- **å”¯ä¸€æ ‡è¯†**: uuid 11.1.0

## ğŸ“‹ æ•°æ®åº“è®¾è®¡

### ä¸»è¦æ•°æ®è¡¨

- **users** - ç”¨æˆ·è¡¨
- **diaries** - æ—¥è®°è¡¨
  - çŠ¶æ€ï¼špendingï¼ˆå¾…å®¡æ ¸ï¼‰ã€approvedï¼ˆå·²é€šè¿‡ï¼‰ã€rejectedï¼ˆå·²é©³å›ï¼‰ã€deletedï¼ˆå·²åˆ é™¤ï¼‰
- **diary_images** - æ—¥è®°å›¾ç‰‡è¡¨
- **diary_videos** - æ—¥è®°è§†é¢‘è¡¨
- **diary_likes** - ç‚¹èµè®°å½•è¡¨
- **diary_comments** - è¯„è®ºè¡¨

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 14.0.0
- MySQL >= 8.0
- npm æˆ– yarn

### 1. å…‹éš†é¡¹ç›®

```bash
git clone <repository-url>
cd TravelDiary
```

### 2. æ•°æ®åº“é…ç½®

1. åˆ›å»ºMySQLæ•°æ®åº“
```sql
CREATE DATABASE traveldiary;
```

2. å¯¼å…¥æ•°æ®åº“ç»“æ„
```bash
mysql -u root -p traveldiary < traveldiary-backend/traveldiary.sql
```

3. é…ç½®æ•°æ®åº“è¿æ¥
åœ¨ `traveldiary-backend` ç›®å½•ä¸‹åˆ›å»º `.env` æ–‡ä»¶ï¼š

```env
# æ•°æ®åº“é…ç½®
DB_HOST=localhost
DB_USER=root
DB_PASSWORD=your_password
DB_NAME=traveldiary
DB_DIALECT=mysql

# æœåŠ¡ç«¯å£
PORT=3001

# JWTå¯†é’¥
JWT_SECRET=your_jwt_secret_key
```

### 3. å¯åŠ¨åç«¯æœåŠ¡

```bash
cd traveldiary-backend
npm install
node app.js
```

æœåŠ¡å°†åœ¨ `http://localhost:3001` å¯åŠ¨

### 4. å¯åŠ¨H5ç§»åŠ¨ç«¯

åœ¨ `traveldiary` ç›®å½•ä¸‹åˆ›å»º `.env` æ–‡ä»¶ï¼ˆå¦‚éœ€è¦ï¼‰ï¼š

```env
REACT_APP_API_URL=http://localhost:3001/api
```

å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼š

```bash
cd traveldiary
npm install
npm start
```

åº”ç”¨å°†åœ¨ `http://localhost:3000` å¯åŠ¨

### 5. å¯åŠ¨PCå®¡æ ¸ç«¯

åœ¨ `traveldiary-audit` ç›®å½•ä¸‹é…ç½® `.env` æ–‡ä»¶ï¼š

```env
REACT_APP_API_URL=http://localhost:3001/api
```

å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼š

```bash
cd traveldiary-audit
npm install
npm start
```

åº”ç”¨å°†åœ¨ `http://localhost:3001` å¯åŠ¨ï¼ˆæˆ–å…¶ä»–å¯ç”¨ç«¯å£ï¼‰

## ğŸ“± åŠŸèƒ½æˆªå›¾

### ç§»åŠ¨ç«¯åŠŸèƒ½
- é¦–é¡µï¼šå±•ç¤ºå·²å®¡æ ¸é€šè¿‡çš„æ—…æ¸¸æ—¥è®°åˆ—è¡¨
- å‘å¸ƒï¼šæ”¯æŒæ–‡æœ¬ã€å›¾ç‰‡ã€è§†é¢‘ä¸Šä¼ 
- è¯¦æƒ…ï¼šæŸ¥çœ‹æ—¥è®°è¯¦æƒ…ã€ç‚¹èµã€è¯„è®º
- æˆ‘çš„ï¼šä¸ªäººæ—¥è®°ç®¡ç†ã€å®¡æ ¸çŠ¶æ€æŸ¥çœ‹

### PCå®¡æ ¸ç«¯åŠŸèƒ½
- å®¡æ ¸åˆ—è¡¨ï¼šæŸ¥çœ‹å¾…å®¡æ ¸çš„æ—¥è®°
- å®¡æ ¸æ“ä½œï¼šé€šè¿‡æˆ–é©³å›æ—¥è®°ï¼Œå¡«å†™é©³å›åŸå› 
- è¯¦æƒ…æŸ¥çœ‹ï¼šæŸ¥çœ‹æ—¥è®°å®Œæ•´å†…å®¹

## ğŸ”‘ APIæ¥å£è¯´æ˜

### ç”¨æˆ·ç›¸å…³
- `POST /api/users/register` - ç”¨æˆ·æ³¨å†Œ
- `POST /api/users/login` - ç”¨æˆ·ç™»å½•
- `GET /api/users/profile` - è·å–ç”¨æˆ·ä¿¡æ¯
- `PUT /api/users/profile` - æ›´æ–°ç”¨æˆ·ä¿¡æ¯

### æ—¥è®°ç›¸å…³
- `GET /api/diaries` - è·å–æ—¥è®°åˆ—è¡¨
- `GET /api/diaries/:id` - è·å–æ—¥è®°è¯¦æƒ…
- `POST /api/diaries` - å‘å¸ƒæ—¥è®°
- `PUT /api/diaries/:id` - æ›´æ–°æ—¥è®°
- `DELETE /api/diaries/:id` - åˆ é™¤æ—¥è®°
- `PUT /api/diaries/:id/status` - å®¡æ ¸æ—¥è®°

### äº’åŠ¨ç›¸å…³
- `POST /api/likes` - ç‚¹èµ
- `DELETE /api/likes/:id` - å–æ¶ˆç‚¹èµ
- `GET /api/comments` - è·å–è¯„è®ºåˆ—è¡¨
- `POST /api/comments` - å‘è¡¨è¯„è®º
- `DELETE /api/comments/:id` - åˆ é™¤è¯„è®º

## ğŸ” èº«ä»½è®¤è¯

é¡¹ç›®ä½¿ç”¨JWTï¼ˆJSON Web Tokenï¼‰è¿›è¡Œç”¨æˆ·èº«ä»½è®¤è¯ï¼š

1. ç”¨æˆ·ç™»å½•æˆåŠŸåï¼ŒæœåŠ¡å™¨è¿”å›JWT token
2. å®¢æˆ·ç«¯å°†tokenå­˜å‚¨åœ¨localStorage
3. åç»­è¯·æ±‚åœ¨Headerä¸­æºå¸¦token
4. æœåŠ¡å™¨éªŒè¯tokenæœ‰æ•ˆæ€§

```javascript
// è¯·æ±‚æ‹¦æˆªå™¨ç¤ºä¾‹
axios.interceptors.request.use(config => {
  const token = localStorage.getItem('token');
  if (token) {
    config.headers.Authorization = `Bearer ${token}`;
  }
  return config;
});
```

## ğŸ“ å¼€å‘è§„èŒƒ

### ä»£ç é£æ ¼
- ä½¿ç”¨ES6+è¯­æ³•
- ç»„ä»¶ä½¿ç”¨å‡½æ•°å¼ç»„ä»¶å’ŒHooks
- éµå¾ªReactæœ€ä½³å®è·µ

### å‘½åè§„èŒƒ
- ç»„ä»¶æ–‡ä»¶ï¼šå¤§é©¼å³°å‘½åï¼ˆPascalCaseï¼‰
- æ™®é€šæ–‡ä»¶ï¼šå°é©¼å³°å‘½åï¼ˆcamelCaseï¼‰
- å¸¸é‡ï¼šå…¨å¤§å†™ä¸‹åˆ’çº¿åˆ†éš”ï¼ˆUPPER_CASEï¼‰

### Gitæäº¤è§„èŒƒ
```
feat: æ–°åŠŸèƒ½
fix: ä¿®å¤bug
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼è°ƒæ•´
refactor: é‡æ„
test: æµ‹è¯•ç›¸å…³
chore: æ„å»º/å·¥å…·ç›¸å…³
```

## ğŸ› å¸¸è§é—®é¢˜

### 1. æ•°æ®åº“è¿æ¥å¤±è´¥
- æ£€æŸ¥MySQLæœåŠ¡æ˜¯å¦å¯åŠ¨
- ç¡®è®¤.envæ–‡ä»¶ä¸­çš„æ•°æ®åº“é…ç½®ä¿¡æ¯
- éªŒè¯æ•°æ®åº“ç”¨æˆ·æƒé™

### 2. å›¾ç‰‡ä¸Šä¼ å¤±è´¥
- ç¡®ä¿publicç›®å½•ä¸‹çš„å­ç›®å½•å­˜åœ¨ä¸”æœ‰å†™å…¥æƒé™
- æ£€æŸ¥multeré…ç½®
- éªŒè¯æ–‡ä»¶å¤§å°é™åˆ¶

### 3. è·¨åŸŸé—®é¢˜
- åç«¯å·²é…ç½®CORS
- æ£€æŸ¥å‰ç«¯è¯·æ±‚çš„APIåœ°å€æ˜¯å¦æ­£ç¡®

### 4. Tokenå¤±æ•ˆ
- æ£€æŸ¥JWT_SECRETé…ç½®
- ç¡®è®¤tokenæœ‰æ•ˆæœŸè®¾ç½®
- å‰ç«¯éœ€å¤„ç†tokenè¿‡æœŸæƒ…å†µ

## ğŸ“¦ é¡¹ç›®éƒ¨ç½²

### å‰ç«¯éƒ¨ç½²

```bash
# H5ç§»åŠ¨ç«¯
cd traveldiary
npm run build
# å°†buildç›®å½•éƒ¨ç½²åˆ°æœåŠ¡å™¨

# PCå®¡æ ¸ç«¯
cd traveldiary-audit
npm run build
# å°†buildç›®å½•éƒ¨ç½²åˆ°æœåŠ¡å™¨
```

### åç«¯éƒ¨ç½²

```bash
cd traveldiary-backend
# å»ºè®®ä½¿ç”¨PM2è¿›è¡Œè¿›ç¨‹ç®¡ç†
npm install -g pm2
pm2 start app.js --name traveldiary-backend
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

1. Forkæœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯Pull Request

## ğŸ“„ License

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ äº¤æµä½¿ç”¨

## ğŸ‘¥ å›¢é˜Ÿæˆå‘˜

æºç¨‹å‰ç«¯è®­ç»ƒè¥å­¦å‘˜

## ğŸ“® è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿è”ç³»é¡¹ç›®ç»´æŠ¤è€…

---

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸€ä¸ªStarï¼**
